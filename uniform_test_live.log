================================================================================
   UNIFORM CLUSTER DUAL CONNECTION TEST - QM DISTRIBUTION VERIFICATION
================================================================================
Start time: 2025-09-09 15:01:05.658
Log file: UNIFORM_CLUSTER_DUAL_TEST_1757430065643.log

TEST OBJECTIVES:
  1. Connection 1 and Connection 2 should use DIFFERENT Queue Managers
  2. Child sessions MUST use the SAME Queue Manager as parent connection
  3. APPLTAG will correlate parent-child relationships
  4. EXTCONN will prove Queue Manager assignment

CCDT Configuration:
  - Using: /workspace/ccdt/ccdt.json (ALL 3 QUEUE MANAGERS)
  - QM1: 10.10.10.10:1414
  - QM2: 10.10.10.11:1414
  - QM3: 10.10.10.12:1414
  - Affinity: none (random selection)
================================================================================

🔑 BASE TRACKING KEY: UNIFORM-1757430065643
   Connection 1 will use: UNIFORM-1757430065643-C1
   Connection 2 will use: UNIFORM-1757430065643-C2

================================================================================

╔══════════════════════════════════════════════════════════════════════════════╗
║                   CREATING CONNECTION 1 - WITH 5 SESSIONS                    ║
╚══════════════════════════════════════════════════════════════════════════════╝

Creating factory for Connection 1...
  ✓ Factory 1 configured with APPLTAG: UNIFORM-1757430065643-C1
  ✓ Using CCDT with ALL Queue Managers
  ✓ Queue Manager selection: RANDOM (*)

Creating Connection 1...
✅ CONNECTION 1 CREATED

📊 CONNECTION 1 DETAILS:
  Connection ID: 414D5143514D312020202020202020208A11C06800810040
  Queue Manager: QM1_2025-09-05_02.13.44                         
  Host: /10.10.10.10
  Port: 443
  EXTCONN (QM ID): 414D5143514D31202020202020202020
  APPLTAG: UNIFORM-1757430065643-C1

  🎯 CONNECTION 1 CONNECTED TO: QM1

✅ Connection 1 started

Creating 5 sessions for Connection 1:
----------------------------------------

  Session 1.1 created
    CONNECTION_ID: 414D5143514D312020202020202020208A11C06800810040
    EXTCONN: 414D5143514D31202020202020202020
    Matches parent: ✅ YES (SAME QM)

  Session 1.2 created
    CONNECTION_ID: 414D5143514D312020202020202020208A11C06800810040
    EXTCONN: 414D5143514D31202020202020202020
    Matches parent: ✅ YES (SAME QM)

  Session 1.3 created
    CONNECTION_ID: 414D5143514D312020202020202020208A11C06800810040
    EXTCONN: 414D5143514D31202020202020202020
    Matches parent: ✅ YES (SAME QM)

  Session 1.4 created
    CONNECTION_ID: 414D5143514D312020202020202020208A11C06800810040
    EXTCONN: 414D5143514D31202020202020202020
    Matches parent: ✅ YES (SAME QM)

  Session 1.5 created
    CONNECTION_ID: 414D5143514D312020202020202020208A11C06800810040
    EXTCONN: 414D5143514D31202020202020202020
    Matches parent: ✅ YES (SAME QM)

✅ Connection 1 setup complete: 1 parent + 5 sessions = 6 MQ connections
   All on Queue Manager: QM1

================================================================================

╔══════════════════════════════════════════════════════════════════════════════╗
║                   CREATING CONNECTION 2 - WITH 3 SESSIONS                    ║
╚══════════════════════════════════════════════════════════════════════════════╝

Creating factory for Connection 2...
  ✓ Factory 2 configured with APPLTAG: UNIFORM-1757430065643-C2
  ✓ Using CCDT with ALL Queue Managers
  ✓ Queue Manager selection: RANDOM (*)

Creating Connection 2...
✅ CONNECTION 2 CREATED

📊 CONNECTION 2 DETAILS:
  Connection ID: 414D5143514D312020202020202020208A11C06800870040
  Queue Manager: QM1_2025-09-05_02.13.44                         
  Host: /10.10.10.10
  Port: 443
  EXTCONN (QM ID): 414D5143514D31202020202020202020
  APPLTAG: UNIFORM-1757430065643-C2

  🎯 CONNECTION 2 CONNECTED TO: QM1

✅ Connection 2 started

Creating 3 sessions for Connection 2:
----------------------------------------

  Session 2.1 created
    CONNECTION_ID: 414D5143514D312020202020202020208A11C06800870040
    EXTCONN: 414D5143514D31202020202020202020
    Matches parent: ✅ YES (SAME QM)

  Session 2.2 created
    CONNECTION_ID: 414D5143514D312020202020202020208A11C06800870040
    EXTCONN: 414D5143514D31202020202020202020
    Matches parent: ✅ YES (SAME QM)

  Session 2.3 created
    CONNECTION_ID: 414D5143514D312020202020202020208A11C06800870040
    EXTCONN: 414D5143514D31202020202020202020
    Matches parent: ✅ YES (SAME QM)

✅ Connection 2 setup complete: 1 parent + 3 sessions = 4 MQ connections
   All on Queue Manager: QM1

================================================================================

╔══════════════════════════════════════════════════════════════════════════════╗
║                    UNIFORM CLUSTER DISTRIBUTION ANALYSIS                     ║
╠══════════════════════════════════════════════════════════════════════════════╣
║                                                                              ║
║ QUEUE MANAGER DISTRIBUTION:                                                 ║
║   Connection 1: QM1 (EXTCONN: 414D5143514D3120...)                          ║
║   Connection 2: QM1 (EXTCONN: 414D5143514D3120...)                          ║
║   Different QMs: ❌ NO - BOTH ON SAME QM                                     ║
║                                                                              ║
║ CONNECTION 1 ANALYSIS:                                                      ║
║   APPLTAG: UNIFORM-1757430065643-C1                                         ║
║   Parent Connection ID: 414D5143514D312020202020202020208A11C06800810040    ║
║   Sessions: 5                                                               ║
║   All sessions share parent's CONNECTION_ID: ✅                             ║
║   All sessions share parent's EXTCONN: ✅                                   ║
║   All on Queue Manager: QM1                                                ║
║                                                                              ║
║ CONNECTION 2 ANALYSIS:                                                      ║
║   APPLTAG: UNIFORM-1757430065643-C2                                         ║
║   Parent Connection ID: 414D5143514D312020202020202020208A11C06800870040    ║
║   Sessions: 3                                                               ║
║   All sessions share parent's CONNECTION_ID: ✅                             ║
║   All sessions share parent's EXTCONN: ✅                                   ║
║   All on Queue Manager: QM1                                                ║
║                                                                              ║
║ KEY FINDINGS:                                                               ║
║   1. APPLTAG correlates parent-child: ✅ PROVEN                             ║
║   2. EXTCONN identifies Queue Manager: ✅ PROVEN                            ║
║   3. Sessions inherit parent's QM: ✅ PROVEN                                ║
║   4. Uniform Cluster distributes connections: ⚠️  SAME QM (try again)      ║
║                                                                              ║
╚══════════════════════════════════════════════════════════════════════════════╝

================================================================================
IMPORTANT: CONNECTIONS ARE NOW ACTIVE - CHECK MQSC NOW!
================================================================================

📊 MQSC COMMANDS TO VERIFY DISTRIBUTION:
────────────────────────────────────────────────────────────

1. Check ALL Queue Managers for connections:
   QM1: docker exec qm1 bash -c "echo 'DIS CONN(*) WHERE(APPLTAG LK \'UNIFORM-1757430065643*\') ALL' | runmqsc QM1" | grep -E "CONN\(|APPLTAG\(|EXTCONN\("
   QM2: docker exec qm2 bash -c "echo 'DIS CONN(*) WHERE(APPLTAG LK \'UNIFORM-1757430065643*\') ALL' | runmqsc QM2" | grep -E "CONN\(|APPLTAG\(|EXTCONN\("
   QM3: docker exec qm3 bash -c "echo 'DIS CONN(*) WHERE(APPLTAG LK \'UNIFORM-1757430065643*\') ALL' | runmqsc QM3" | grep -E "CONN\(|APPLTAG\(|EXTCONN\("

2. Verify Connection 1 (should be 6 connections on QM1):
   docker exec qm1 bash -c "echo 'DIS CONN(*) WHERE(APPLTAG EQ \'UNIFORM-1757430065643-C1\') ALL' | runmqsc QM1"

3. Verify Connection 2 (should be 4 connections on QM1):
   docker exec qm1 bash -c "echo 'DIS CONN(*) WHERE(APPLTAG EQ \'UNIFORM-1757430065643-C2\') ALL' | runmqsc QM1"
────────────────────────────────────────────────────────────

🔄 KEEPING CONNECTIONS ALIVE FOR 120 SECONDS...

Use the MQSC commands above to verify distribution
Detailed log: UNIFORM_CLUSTER_DUAL_TEST_1757430065643.log
  ⏱️  Time remaining: 120 seconds  [████████████████████████████████████████████████████████████]  ⏱️  Time remaining: 119 seconds  [███████████████████████████████████████████████████████████ ]  ⏱️  Time remaining: 118 seconds  [███████████████████████████████████████████████████████████ ]  ⏱️  Time remaining: 117 seconds  [██████████████████████████████████████████████████████████  ]  ⏱️  Time remaining: 116 seconds  [██████████████████████████████████████████████████████████  ]  ⏱️  Time remaining: 115 seconds  [█████████████████████████████████████████████████████████   ]  ⏱️  Time remaining: 114 seconds  [█████████████████████████████████████████████████████████   ]  ⏱️  Time remaining: 113 seconds  [████████████████████████████████████████████████████████    ]  ⏱️  Time remaining: 112 seconds  [████████████████████████████████████████████████████████    ]  ⏱️  Time remaining: 111 seconds  [███████████████████████████████████████████████████████     ]  ⏱️  Time remaining: 110 seconds  [███████████████████████████████████████████████████████     ]  ⏱️  Time remaining: 109 seconds  [██████████████████████████████████████████████████████      ]  ⏱️  Time remaining: 108 seconds  [██████████████████████████████████████████████████████      ]  ⏱️  Time remaining: 107 seconds  [█████████████████████████████████████████████████████       ]  ⏱️  Time remaining: 106 seconds  [█████████████████████████████████████████████████████       ]  ⏱️  Time remaining: 105 seconds  [████████████████████████████████████████████████████        ]  ⏱️  Time remaining: 104 seconds  [████████████████████████████████████████████████████        ]  ⏱️  Time remaining: 103 seconds  [███████████████████████████████████████████████████         ]  ⏱️  Time remaining: 102 seconds  [███████████████████████████████████████████████████         ]  ⏱️  Time remaining: 101 seconds  [██████████████████████████████████████████████████          ]  ⏱️  Time remaining: 100 seconds  [██████████████████████████████████████████████████          ]  ⏱️  Time remaining:  99 seconds  [█████████████████████████████████████████████████           ]  ⏱️  Time remaining:  98 seconds  [█████████████████████████████████████████████████           ]  ⏱️  Time remaining:  97 seconds  [████████████████████████████████████████████████            ]  ⏱️  Time remaining:  96 seconds  [████████████████████████████████████████████████            ]  ⏱️  Time remaining:  95 seconds  [███████████████████████████████████████████████             ]  ⏱️  Time remaining:  94 seconds  [███████████████████████████████████████████████             ]  ⏱️  Time remaining:  93 seconds  [██████████████████████████████████████████████              ]  ⏱️  Time remaining:  92 seconds  [██████████████████████████████████████████████              ]  ⏱️  Time remaining:  91 seconds  [█████████████████████████████████████████████               ]  ⏱️  Time remaining:  90 seconds  [█████████████████████████████████████████████               ]  ⏱️  Time remaining:  89 seconds  [████████████████████████████████████████████                ]  ⏱️  Time remaining:  88 seconds  [████████████████████████████████████████████                ]  ⏱️  Time remaining:  87 seconds  [███████████████████████████████████████████                 ]  ⏱️  Time remaining:  86 seconds  [███████████████████████████████████████████                 ]  ⏱️  Time remaining:  85 seconds  [██████████████████████████████████████████                  ]  ⏱️  Time remaining:  84 seconds  [██████████████████████████████████████████                  ]  ⏱️  Time remaining:  83 seconds  [█████████████████████████████████████████                   ]  ⏱️  Time remaining:  82 seconds  [█████████████████████████████████████████                   ]  ⏱️  Time remaining:  81 seconds  [████████████████████████████████████████                    ]  ⏱️  Time remaining:  80 seconds  [████████████████████████████████████████                    ]  ⏱️  Time remaining:  79 seconds  [███████████████████████████████████████                     ]  ⏱️  Time remaining:  78 seconds  [███████████████████████████████████████                     ]  ⏱️  Time remaining:  77 seconds  [██████████████████████████████████████                      ]  ⏱️  Time remaining:  76 seconds  [██████████████████████████████████████                      ]  ⏱️  Time remaining:  75 seconds  [█████████████████████████████████████                       ]  ⏱️  Time remaining:  74 seconds  [█████████████████████████████████████                       ]  ⏱️  Time remaining:  73 seconds  [████████████████████████████████████                        ]  ⏱️  Time remaining:  72 seconds  [████████████████████████████████████                        ]  ⏱️  Time remaining:  71 seconds  [███████████████████████████████████                         ]  ⏱️  Time remaining:  70 seconds  [███████████████████████████████████                         ]  ⏱️  Time remaining:  69 seconds  [██████████████████████████████████                          ]  ⏱️  Time remaining:  68 seconds  [██████████████████████████████████                          ]  ⏱️  Time remaining:  67 seconds  [█████████████████████████████████                           ]  ⏱️  Time remaining:  66 seconds  [█████████████████████████████████                           ]  ⏱️  Time remaining:  65 seconds  [████████████████████████████████                            ]  ⏱️  Time remaining:  64 seconds  [████████████████████████████████                            ]  ⏱️  Time remaining:  63 seconds  [███████████████████████████████                             ]  ⏱️  Time remaining:  62 seconds  [███████████████████████████████                             ]  ⏱️  Time remaining:  61 seconds  [██████████████████████████████                              ]  ⏱️  Time remaining:  60 seconds  [██████████████████████████████                              ]  ⏱️  Time remaining:  59 seconds  [█████████████████████████████                               ]  ⏱️  Time remaining:  58 seconds  [█████████████████████████████                               ]  ⏱️  Time remaining:  57 seconds  [████████████████████████████                                ]  ⏱️  Time remaining:  56 seconds  [████████████████████████████                                ]  ⏱️  Time remaining:  55 seconds  [███████████████████████████                                 ]  ⏱️  Time remaining:  54 seconds  [███████████████████████████                                 ]  ⏱️  Time remaining:  53 seconds  [██████████████████████████                                  ]  ⏱️  Time remaining:  52 seconds  [██████████████████████████                                  ]  ⏱️  Time remaining:  51 seconds  [█████████████████████████                                   ]  ⏱️  Time remaining:  50 seconds  [█████████████████████████                                   ]  ⏱️  Time remaining:  49 seconds  [████████████████████████                                    ]  ⏱️  Time remaining:  48 seconds  [████████████████████████                                    ]  ⏱️  Time remaining:  47 seconds  [███████████████████████                                     ]  ⏱️  Time remaining:  46 seconds  [███████████████████████                                     ]  ⏱️  Time remaining:  45 seconds  [██████████████████████                                      ]  ⏱️  Time remaining:  44 seconds  [██████████████████████                                      ]  ⏱️  Time remaining:  43 seconds  [█████████████████████                                       ]  ⏱️  Time remaining:  42 seconds  [█████████████████████                                       ]  ⏱️  Time remaining:  41 seconds  [████████████████████                                        ]  ⏱️  Time remaining:  40 seconds  [████████████████████                                        ]  ⏱️  Time remaining:  39 seconds  [███████████████████                                         ]  ⏱️  Time remaining:  38 seconds  [███████████████████                                         ]  ⏱️  Time remaining:  37 seconds  [██████████████████                                          ]  ⏱️  Time remaining:  36 seconds  [██████████████████                                          ]  ⏱️  Time remaining:  35 seconds  [█████████████████                                           ]  ⏱️  Time remaining:  34 seconds  [█████████████████                                           ]  ⏱️  Time remaining:  33 seconds  [████████████████                                            ]  ⏱️  Time remaining:  32 seconds  [████████████████                                            ]  ⏱️  Time remaining:  31 seconds  [███████████████                                             ]  ⏱️  Time remaining:  30 seconds  [███████████████                                             ]  ⏱️  Time remaining:  29 seconds  [██████████████                                              ]  ⏱️  Time remaining:  28 seconds  [██████████████                                              ]  ⏱️  Time remaining:  27 seconds  [█████████████                                               ]  ⏱️  Time remaining:  26 seconds  [█████████████                                               ]  ⏱️  Time remaining:  25 seconds  [████████████                                                ]  ⏱️  Time remaining:  24 seconds  [████████████                                                ]  ⏱️  Time remaining:  23 seconds  [███████████                                                 ]  ⏱️  Time remaining:  22 seconds  [███████████                                                 ]  ⏱️  Time remaining:  21 seconds  [██████████                                                  ]  ⏱️  Time remaining:  20 seconds  [██████████                                                  ]  ⏱️  Time remaining:  19 seconds  [█████████                                                   ]  ⏱️  Time remaining:  18 seconds  [█████████                                                   ]  ⏱️  Time remaining:  17 seconds  [████████                                                    ]  ⏱️  Time remaining:  16 seconds  [████████                                                    ]  ⏱️  Time remaining:  15 seconds  [███████                                                     ]  ⏱️  Time remaining:  14 seconds  [███████                                                     ]  ⏱️  Time remaining:  13 seconds  [██████                                                      ]  ⏱️  Time remaining:  12 seconds  [██████                                                      ]  ⏱️  Time remaining:  11 seconds  [█████                                                       ]  ⏱️  Time remaining:  10 seconds  [█████                                                       ]  ⏱️  Time remaining:   9 seconds  [████                                                        ]  ⏱️  Time remaining:   8 seconds  [████                                                        ]  ⏱️  Time remaining:   7 seconds  [███                                                         ]  ⏱️  Time remaining:   6 seconds  [███                                                         ]  ⏱️  Time remaining:   5 seconds  [██                                                          ]  ⏱️  Time remaining:   4 seconds  [██                                                          ]  ⏱️  Time remaining:   3 seconds  [█                                                           ]  ⏱️  Time remaining:   2 seconds  [█                                                           ]  ⏱️  Time remaining:   1 seconds  [                                                            ]

CLOSING SESSIONS AND CONNECTIONS...
  Connection 1 - Session 1 closed
  Connection 1 - Session 2 closed
  Connection 1 - Session 3 closed
  Connection 1 - Session 4 closed
  Connection 1 - Session 5 closed
  Connection 2 - Session 1 closed
  Connection 2 - Session 2 closed
  Connection 2 - Session 3 closed
  Connection 1 closed
  Connection 2 closed

✅ Test completed!
Results Summary:
  Connection 1: QM1 with 5 sessions
  Connection 2: QM1 with 3 sessions
  Distribution: SAME QM - Try again


✅ Test completed!
📁 Log file: UNIFORM_CLUSTER_DUAL_TEST_1757430065643.log
🔑 Tracking Key: UNIFORM-1757430065643

Results:
  Connection 1 (UNIFORM-1757430065643-C1): QM1
  Connection 2 (UNIFORM-1757430065643-C2): QM1

⚠️  Both connections went to SAME Queue Manager
This can happen with random selection. Run again for distribution.
